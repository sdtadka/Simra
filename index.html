
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="GramVani - Islamic Village Portal for Simra">
    <meta name="theme-color" content="#0a2f44">
    <title>GramVani - Islamic Portal</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #0a2f44;
            --primary-light: #1b4f72;
            --gold: #ffd700;
            --gold-dark: #daa520;
            --green: #27ae60;
            --green-light: #2ecc71;
            --red: #e74c3c;
            --orange: #e67e22;
            --dark: #2c3e50;
            --gray: #5a6b7c;
            --light: #f8f9fa;
            --white: #ffffff;
            --shadow: 0 8px 32px rgba(0,0,0,0.15);
            --shadow-lg: 0 20px 60px rgba(0,0,0,0.25);
            --radius: 20px;
            --radius-sm: 12px;
            --transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(160deg, var(--primary) 0%, var(--primary-light) 40%, #1a6fa0 100%);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Islamic Pattern Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(255,215,0,0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(255,215,0,0.03) 0%, transparent 50%),
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffd700' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 16px;
            position: relative;
            z-index: 1;
        }

        /* ============ HEADER ============ */
        header {
            background: linear-gradient(135deg, rgba(10,47,68,0.98), rgba(27,79,114,0.98));
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 3px solid var(--gold);
            box-shadow: 0 4px 30px rgba(0,0,0,0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            flex-shrink: 0;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(255,215,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .logo-icon::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: logoShine 3s infinite;
        }

        @keyframes logoShine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .logo-icon svg {
            width: 28px;
            height: 28px;
            stroke: var(--primary);
            stroke-width: 2.5;
            fill: none;
            position: relative;
            z-index: 1;
        }

        .logo-text-wrap {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #fff 0%, var(--gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
            letter-spacing: -0.5px;
        }

        .logo-subtitle {
            font-size: 0.65rem;
            color: rgba(255,215,0,0.7);
            font-weight: 500;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .bismillah-header {
            color: var(--gold);
            font-family: 'Amiri', serif;
            font-size: 1.6rem;
            opacity: 0.6;
            display: none;
        }

        /* Hamburger Menu */
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            padding: 8px;
            border: none;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            z-index: 1001;
        }

        .hamburger span {
            width: 24px;
            height: 2.5px;
            background: var(--gold);
            border-radius: 2px;
            transition: var(--transition);
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        /* Navigation */
        nav {
            display: flex;
            align-items: center;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 6px;
            flex-wrap: wrap;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            color: rgba(255,255,255,0.85);
            font-weight: 600;
            padding: 10px 18px;
            border-radius: 50px;
            transition: var(--transition);
            font-size: 0.9rem;
            border: 1.5px solid rgba(255,215,0,0.2);
            background: rgba(255,255,255,0.05);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,215,0,0.1), transparent);
            transition: left 0.5s;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
            flex-shrink: 0;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--gold);
            color: var(--primary);
            border-color: var(--gold);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,215,0,0.35);
        }

        .nav-link.active svg, .nav-link:hover svg {
            stroke: var(--primary);
        }

        .nav-badge {
            background: var(--red);
            color: white;
            font-size: 0.65rem;
            padding: 1px 6px;
            border-radius: 50px;
            font-weight: 700;
            min-width: 18px;
            text-align: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        /* ============ MAIN ============ */
        main {
            padding: 20px 0;
            min-height: calc(100vh - 140px);
            position: relative;
            z-index: 1;
        }

        .content-box {
            background: rgba(255,255,255,0.97);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow-lg);
            animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            border: 1px solid rgba(255,215,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .content-box::after {
            content: 'Ô∑Ω';
            position: absolute;
            bottom: 15px;
            right: 25px;
            font-size: 4rem;
            color: rgba(10,47,68,0.03);
            font-family: 'Amiri', serif;
            pointer-events: none;
        }

        @keyframes fadeSlideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ============ PAGE HEADER ============ */
        .page-header {
            text-align: center;
            margin-bottom: 25px;
            padding: 24px;
            background: linear-gradient(135deg, #f0f4f8 0%, #e8eef5 100%);
            border-radius: var(--radius);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,215,0,0.2);
        }

        .page-header::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 6px;
            background: linear-gradient(180deg, var(--gold), var(--gold-dark));
            border-radius: 6px 0 0 6px;
        }

        .page-header::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 6px;
            background: linear-gradient(180deg, var(--primary), var(--primary-light));
            border-radius: 0 6px 6px 0;
        }

        .page-header h1 {
            color: var(--primary);
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            line-height: 1.3;
        }

        .page-header h1 svg {
            width: 36px;
            height: 36px;
            stroke: var(--gold);
            stroke-width: 2;
            fill: none;
        }

        .page-header p {
            color: var(--gray);
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 14px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .badge-gold {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--primary);
        }

        .badge-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
        }

        .badge-green {
            background: linear-gradient(135deg, var(--green), var(--green-light));
            color: var(--white);
        }

        /* ============ LIVE CLOCK ============ */
        .live-clock-section {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .clock-card {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 16px;
            padding: 16px 30px;
            text-align: center;
            border: 2px solid var(--gold);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            min-width: 200px;
        }

        .clock-label {
            color: var(--gold);
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 5px;
        }

        .clock-time {
            color: var(--white);
            font-size: 2rem;
            font-weight: 800;
            font-variant-numeric: tabular-nums;
        }

        .clock-date {
            color: rgba(255,255,255,0.7);
            font-size: 0.85rem;
            margin-top: 4px;
        }

        /* ============ DASHBOARD CARDS ============ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 18px;
            margin-bottom: 25px;
        }

        .dash-card {
            background: var(--white);
            border-radius: 18px;
            padding: 22px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid rgba(0,0,0,0.06);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .dash-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            border-radius: 18px 18px 0 0;
        }

        .dash-card.card-villagers::before { background: linear-gradient(90deg, var(--green), var(--green-light)); }
        .dash-card.card-team::before { background: linear-gradient(90deg, var(--primary), var(--primary-light)); }
        .dash-card.card-notices::before { background: linear-gradient(90deg, var(--orange), #f39c12); }
        .dash-card.card-ramzan::before { background: linear-gradient(90deg, var(--gold), var(--gold-dark)); }

        .dash-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }

        .dash-card-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .dash-icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .dash-icon svg {
            width: 28px;
            height: 28px;
            stroke: var(--white);
            stroke-width: 2;
            fill: none;
        }

        .card-villagers .dash-icon { background: linear-gradient(135deg, var(--green), var(--green-light)); }
        .card-team .dash-icon { background: linear-gradient(135deg, var(--primary), var(--primary-light)); }
        .card-notices .dash-icon { background: linear-gradient(135deg, var(--orange), #f39c12); }
        .card-ramzan .dash-icon { background: linear-gradient(135deg, var(--gold), var(--gold-dark)); }

        .dash-count {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary);
            line-height: 1;
        }

        .dash-card-bottom h3 {
            color: var(--dark);
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 3px;
        }

        .dash-card-bottom p {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .dash-card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }

        .dash-card-footer span {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .dash-card-footer svg {
            width: 18px;
            height: 18px;
            stroke: var(--gold);
            fill: none;
        }

        /* ============ PRAYER TIMES ============ */
        .prayer-section {
            background: linear-gradient(145deg, var(--primary), var(--primary-light), #1a6fa0);
            border-radius: var(--radius);
            padding: 25px;
            margin: 25px 0;
            border: 2px solid var(--gold);
            position: relative;
            overflow: hidden;
        }

        .prayer-section::before {
            content: 'üïå';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 3rem;
            opacity: 0.08;
        }

        .prayer-header {
            text-align: center;
            margin-bottom: 22px;
        }

        .prayer-header h2 {
            color: var(--gold);
            font-size: 1.8rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .prayer-header p {
            color: rgba(255,255,255,0.6);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 14px;
        }

        .prayer-card {
            background: rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 18px 14px;
            text-align: center;
            border: 1.5px solid rgba(255,215,0,0.2);
            transition: var(--transition);
            position: relative;
        }

        .prayer-card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-4px);
            border-color: var(--gold);
        }

        .prayer-card.current-prayer {
            background: rgba(255,215,0,0.15);
            border-color: var(--gold);
            box-shadow: 0 0 20px rgba(255,215,0,0.2);
        }

        .prayer-card.current-prayer::after {
            content: '‚óè Now';
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 0.6rem;
            color: var(--gold);
            font-weight: 700;
            animation: pulse 1.5s infinite;
        }

        .prayer-emoji {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .prayer-name {
            color: var(--gold);
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .prayer-name-urdu {
            color: rgba(255,215,0,0.5);
            font-family: 'Amiri', serif;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .prayer-time-main {
            color: var(--white);
            font-size: 1.5rem;
            font-weight: 800;
        }

        .prayer-azan {
            color: rgba(255,255,255,0.5);
            font-size: 0.8rem;
            margin-top: 6px;
        }

        /* ============ RAMZAN SECTION ============ */
        .ramzan-btn-wrap {
            text-align: center;
            margin: 25px 0;
        }

        .ramzan-btn {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(135deg, var(--green), var(--green-light));
            color: var(--white);
            border: 3px solid var(--gold);
            padding: 18px 45px;
            border-radius: 60px;
            font-size: 1.4rem;
            font-weight: 800;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 10px 35px rgba(39,174,96,0.35);
            font-family: 'Poppins', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .ramzan-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: logoShine 4s infinite;
        }

        .ramzan-btn svg {
            width: 32px;
            height: 32px;
            stroke: var(--white);
            stroke-width: 2.5;
            fill: none;
        }

        .ramzan-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 45px rgba(39,174,96,0.5);
        }

        .ramzan-calendar {
            background: var(--white);
            border-radius: var(--radius);
            padding: 25px;
            margin: 20px 0;
            border: 3px solid var(--gold);
            animation: fadeSlideUp 0.4s ease;
        }

        .calendar-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .calendar-header h3 {
            color: var(--primary);
            font-size: 1.6rem;
            font-weight: 800;
        }

        .calendar-header p {
            color: var(--gold-dark);
            font-weight: 600;
        }

        .calendar-close-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-top: 12px;
            padding: 8px 24px;
            background: var(--red);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
        }

        .calendar-close-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(290px, 1fr));
            gap: 14px;
            max-height: 600px;
            overflow-y: auto;
            padding: 5px;
            scroll-behavior: smooth;
        }

        .calendar-grid::-webkit-scrollbar {
            width: 6px;
        }

        .calendar-grid::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 10px;
        }

        .ramzan-day {
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border-radius: 14px;
            padding: 16px;
            border-left: 5px solid var(--gold);
            transition: var(--transition);
            border: 1px solid #eee;
            border-left: 5px solid var(--gold);
        }

        .ramzan-day:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .ramzan-day.today {
            border-left-color: var(--green);
            background: linear-gradient(135deg, #e8f5e9, #fff);
            box-shadow: 0 4px 15px rgba(39,174,96,0.15);
        }

        .ramzan-day.special {
            border-left-color: var(--gold);
            background: linear-gradient(135deg, #fffde7, #fff);
        }

        .day-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .day-num {
            background: var(--primary);
            color: var(--gold);
            padding: 4px 16px;
            border-radius: 25px;
            font-weight: 800;
            font-size: 0.9rem;
        }

        .day-date {
            color: var(--gray);
            font-size: 0.8rem;
        }

        .day-name {
            color: var(--primary);
            font-size: 0.8rem;
            font-weight: 600;
        }

        .day-times-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .day-time-box {
            text-align: center;
            padding: 8px;
            border-radius: 10px;
        }

        .day-time-box.sehri {
            background: rgba(10,47,68,0.06);
        }

        .day-time-box.iftar {
            background: rgba(255,215,0,0.1);
        }

        .day-time-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .day-time-value {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--primary);
            margin-top: 2px;
        }

        .day-special {
            margin-top: 8px;
            font-size: 0.8rem;
            color: var(--gold-dark);
            font-weight: 600;
        }

        /* ============ SEARCH ============ */
        .search-box {
            background: var(--white);
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 20px;
            border: 1px solid rgba(0,0,0,0.08);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .search-form {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input-wrap {
            flex: 1;
            position: relative;
            min-width: 200px;
        }

        .search-input-wrap svg {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            stroke: var(--gray);
            fill: none;
        }

        .search-input {
            width: 100%;
            padding: 14px 18px 14px 48px;
            border: 2px solid #e8ecf1;
            border-radius: 50px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
            background: #f8f9fa;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 4px rgba(255,215,0,0.15);
            background: var(--white);
        }

        .search-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
            white-space: nowrap;
        }

        .search-btn svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            fill: none;
        }

        .search-btn:hover {
            background: var(--gold);
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,215,0,0.3);
        }

        .search-count {
            font-size: 0.85rem;
            color: var(--gray);
            padding: 5px 15px;
            background: #f0f0f0;
            border-radius: 50px;
        }

        /* ============ TABLE ============ */
        .table-wrap {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #eee;
        }

        .table-wrap::-webkit-scrollbar {
            height: 6px;
        }

        .table-wrap::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 700px;
        }

        th {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
            padding: 15px 14px;
            font-weight: 600;
            font-size: 0.9rem;
            text-align: left;
            white-space: nowrap;
            position: sticky;
            top: 0;
        }

        th:first-child { border-radius: 16px 0 0 0; }
        th:last-child { border-radius: 0 16px 0 0; }

        td {
            padding: 13px 14px;
            border-bottom: 1px solid #f0f2f5;
            color: var(--dark);
            font-size: 0.9rem;
        }

        tr {
            transition: var(--transition);
        }

        tr:hover td {
            background: #fffde7;
        }

        tr:nth-child(even) td {
            background: #fafbfc;
        }

        tr:hover:nth-child(even) td {
            background: #fffde7;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-active {
            background: #d5f5e3;
            color: var(--green);
        }

        .status-inactive {
            background: #fadbd8;
            color: var(--red);
        }

        .mobile-masked {
            font-family: monospace;
            color: var(--gray);
        }

        /* ============ FILTER BUTTONS ============ */
        .filter-wrap {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 22px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            background: var(--white);
            color: var(--dark);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
        }

        .filter-btn:hover {
            border-color: var(--gold);
            color: var(--primary);
            background: #fffde7;
        }

        .filter-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* ============ TEAM CARDS ============ */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .team-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #eee;
            transition: var(--transition);
        }

        .team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.12);
        }

        .team-card-top {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            padding: 30px 20px;
            text-align: center;
            position: relative;
        }

        .team-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            border: 3px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
        }

        .team-avatar svg {
            width: 40px;
            height: 40px;
            stroke: var(--gold);
            fill: none;
        }

        .team-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .team-name-header {
            color: var(--white);
            font-size: 1.2rem;
            font-weight: 700;
        }

        .team-role-badge {
            display: inline-block;
            background: var(--gold);
            color: var(--primary);
            padding: 4px 18px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.8rem;
            margin-top: 8px;
        }

        .team-card-body {
            padding: 20px;
        }

        .team-info-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .team-info-row:last-child {
            border-bottom: none;
        }

        .team-info-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: #f0f4f8;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .team-info-icon svg {
            width: 18px;
            height: 18px;
            stroke: var(--gold);
            fill: none;
        }

        .team-info-text {
            flex: 1;
        }

        .team-info-label {
            font-size: 0.7rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .team-info-value {
            color: var(--dark);
            font-weight: 600;
            font-size: 0.95rem;
        }

        /* ============ NOTICE CARDS ============ */
        .notice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 18px;
        }

        .notice-card {
            background: var(--white);
            border-radius: 18px;
            padding: 22px;
            border-left: 6px solid var(--primary);
            box-shadow: 0 4px 18px rgba(0,0,0,0.06);
            transition: var(--transition);
            position: relative;
        }

        .notice-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .notice-card[data-cat="Eidgah"] { border-left-color: var(--green); }
        .notice-card[data-cat="Kabristan"] { border-left-color: #34495e; }
        .notice-card[data-cat="Masjid"] { border-left-color: var(--orange); }
        .notice-card[data-cat="Ramzan"] { border-left-color: var(--gold); }
        .notice-card[data-cat="General"] { border-left-color: var(--primary-light); }
        .notice-card[data-cat="Emergency"] { border-left-color: var(--red); }
        .notice-card[data-cat="Event"] { border-left-color: #9b59b6; }

        .notice-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            gap: 10px;
        }

        .notice-category {
            padding: 4px 14px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 0.75rem;
            color: var(--white);
            white-space: nowrap;
        }

        .notice-priority {
            font-size: 0.7rem;
            font-weight: 700;
            padding: 3px 10px;
            border-radius: 25px;
        }

        .priority-High { background: #fadbd8; color: var(--red); }
        .priority-Medium { background: #fdebd0; color: var(--orange); }
        .priority-Low { background: #d5f5e3; color: var(--green); }

        .notice-title {
            color: var(--primary);
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .notice-desc {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 14px;
        }

        .notice-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        .notice-date {
            color: var(--gray);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .notice-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 20px;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
        }

        .notice-action-btn:hover {
            background: var(--gold);
            color: var(--primary);
        }

        /* ============ LOADING & STATES ============ */
        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px 20px;
            gap: 15px;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid var(--gold);
            border-right: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--primary);
            font-weight: 600;
            font-size: 1rem;
        }

        .loading-sub {
            color: var(--gray);
            font-size: 0.85rem;
        }

        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .error-state {
            text-align: center;
            padding: 30px;
            background: #fff5f5;
            border-radius: 16px;
            border: 1px solid #fecaca;
            margin: 15px 0;
        }

        .error-state svg {
            width: 50px;
            height: 50px;
            stroke: var(--red);
            fill: none;
            margin-bottom: 10px;
        }

        .error-state h3 {
            color: var(--red);
            margin-bottom: 5px;
        }

        .error-state p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .error-state button {
            margin-top: 12px;
            padding: 10px 24px;
            background: var(--red);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: var(--gray);
        }

        .empty-state svg {
            width: 60px;
            height: 60px;
            stroke: #ddd;
            fill: none;
            margin-bottom: 12px;
        }

        /* ============ TOAST NOTIFICATION ============ */
        .toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background: var(--white);
            border-radius: 12px;
            padding: 14px 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 280px;
            max-width: 400px;
            animation: toastIn 0.4s ease;
            border-left: 4px solid var(--green);
        }

        .toast.error { border-left-color: var(--red); }
        .toast.info { border-left-color: var(--primary); }

        .toast-icon { font-size: 1.3rem; }
        .toast-msg { flex: 1; font-size: 0.9rem; color: var(--dark); }

        .toast-close {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--gray);
            padding: 0 4px;
        }

        @keyframes toastIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes toastOut {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(50px); }
        }

        /* ============ FOOTER ============ */
        footer {
            background: linear-gradient(135deg, var(--primary), #061f2e);
            padding: 25px 0 15px;
            border-top: 3px solid var(--gold);
            position: relative;
            z-index: 1;
        }

        .footer-content {
            text-align: center;
        }

        .footer-bismillah {
            font-family: 'Amiri', serif;
            color: var(--gold);
            font-size: 1.5rem;
            margin-bottom: 8px;
            opacity: 0.5;
        }

        .footer-text {
            color: rgba(255,255,255,0.7);
            font-size: 0.85rem;
        }

        .footer-text strong {
            color: var(--gold);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            font-size: 0.8rem;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--gold);
        }

        /* ============ FAB BUTTONS ============ */
        .fab-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 999;
        }

        .fab-btn {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .fab-btn svg {
            width: 22px;
            height: 22px;
            fill: none;
            stroke-width: 2.5;
        }

        .fab-refresh {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
        }

        .fab-refresh svg { stroke: var(--primary); }

        .fab-top {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            opacity: 0;
            transform: scale(0);
        }

        .fab-top.visible {
            opacity: 1;
            transform: scale(1);
        }

        .fab-top svg { stroke: var(--white); }

        .fab-btn:hover {
            transform: scale(1.1);
        }

        .fab-btn:active {
            transform: scale(0.95);
        }

        .fab-refresh.spinning svg {
            animation: spin 0.8s linear infinite;
        }

        /* ============ HIDDEN ============ */
        .hidden {
            display: none !important;
        }

        /* ============ PAGINATION ============ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .page-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: var(--white);
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
        }

        .page-btn:hover, .page-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .page-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .page-info {
            color: var(--gray);
            font-size: 0.85rem;
            padding: 0 10px;
        }

        /* ============ RESPONSIVE ============ */
        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            nav {
                position: fixed;
                top: 0;
                right: -100%;
                width: 280px;
                height: 100vh;
                background: linear-gradient(180deg, var(--primary), var(--primary-light));
                padding: 80px 20px 20px;
                transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 1000;
                box-shadow: -5px 0 30px rgba(0,0,0,0.3);
            }

            nav.open {
                right: 0;
            }

            nav ul {
                flex-direction: column;
                gap: 8px;
            }

            .nav-link {
                padding: 14px 20px;
                border-radius: 14px;
                font-size: 1rem;
                justify-content: flex-start;
            }

            .nav-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 999;
                opacity: 0;
                visibility: hidden;
                transition: var(--transition);
            }

            .nav-overlay.visible {
                opacity: 1;
                visibility: visible;
            }

            .bismillah-header { display: none; }

            .logo-title { font-size: 1.3rem; }
            .logo-subtitle { font-size: 0.6rem; }
            .logo-icon { width: 40px; height: 40px; }

            .page-header h1 { font-size: 1.4rem; }
            .content-box { padding: 16px; }

            .dashboard-grid { grid-template-columns: 1fr; }
            .prayer-grid { grid-template-columns: repeat(2, 1fr); }

            .live-clock-section { flex-direction: column; align-items: center; }
            .clock-card { min-width: 160px; }

            .dash-count { font-size: 2rem; }
            .team-grid { grid-template-columns: 1fr; }
            .notice-grid { grid-template-columns: 1fr; }
            .calendar-grid { grid-template-columns: 1fr; }

            .ramzan-btn { font-size: 1.1rem; padding: 14px 30px; }
            .ramzan-btn svg { width: 24px; height: 24px; }

            .toast { min-width: 250px; max-width: calc(100vw - 40px); }
        }

        @media (max-width: 480px) {
            .prayer-grid { grid-template-columns: 1fr; }
            .header-content { padding: 8px 0; }
            .search-form { flex-direction: column; }
            .search-btn { width: 100%; justify-content: center; }
        }
    </style>
</head>
<body>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Nav Overlay (Mobile) -->
    <div class="nav-overlay" id="navOverlay" onclick="closeMenu()"></div>

    <!-- ============ HEADER ============ -->
    <header>
        <div class="container">
            <div class="header-content">
                <a class="logo" href="#" onclick="showPage('home'); return false;">
                    <div class="logo-icon">
                        <svg viewBox="0 0 24 24"><path d="M3 12L5 10M5 10L12 3L19 10L21 12M5 10V20C5 20 5 20 5 20H19V10" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 20V14H15V20" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                    <div class="logo-text-wrap">
                        <span class="logo-title">GramVani</span>
                        <span class="logo-subtitle">Islamic Village Portal</span>
                    </div>
                </a>

                <span class="bismillah-header">Ô∑Ω</span>

                <button class="hamburger" id="hamburger" onclick="toggleMenu()" aria-label="Menu">
                    <span></span><span></span><span></span>
                </button>

                <nav id="mainNav">
                    <ul>
                        <li><a href="#" onclick="showPage('home')" class="nav-link active" id="nav-home">
                            <svg viewBox="0 0 24 24"><path d="M3 12L12 3L21 12M5 10V20H19V10" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            Home
                        </a></li>
                        <li><a href="#" onclick="showPage('villagers')" class="nav-link" id="nav-villagers">
                            <svg viewBox="0 0 24 24"><path d="M17 21V19C17 16.79 14.76 15 12 15C9.24 15 7 16.79 7 19V21M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12Z" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            Villagers
                            <span class="nav-badge" id="nav-villager-count">0</span>
                        </a></li>
                        <li><a href="#" onclick="showPage('team')" class="nav-link" id="nav-team">
                            <svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4" stroke="currentColor" fill="none" stroke-width="2"/><path d="M6 21V19C6 16.24 8.69 14 12 14C15.31 14 18 16.24 18 19V21" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            Team
                        </a></li>
                        <li><a href="#" onclick="showPage('notices')" class="nav-link" id="nav-notices">
                            <svg viewBox="0 0 24 24"><path d="M18 8C18 4.69 15.31 2 12 2C8.69 2 6 4.69 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" fill="none" stroke-width="2"/><path d="M13.73 21C13.37 21.64 12.74 22 12 22C11.26 22 10.63 21.64 10.27 21" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            Notices
                            <span class="nav-badge" id="nav-notice-count">0</span>
                        </a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- ============ MAIN ============ -->
    <main>
        <div class="container">

            <!-- ======== HOME PAGE ======== -->
            <div id="page-home" class="content-box">
                <div class="page-header">
                    <h1>
                        <svg viewBox="0 0 24 24"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" fill="none" stroke-width="2"/><path d="M2 17L12 22L22 17" stroke="currentColor" fill="none" stroke-width="2"/><path d="M2 12L12 17L22 12" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                        GramVani - Islamic Portal
                    </h1>
                    <p>
                        <span class="badge badge-gold">Ô∑Ω</span>
                        Complete Village Information System
                        <span class="badge badge-primary">Simra</span>
                    </p>
                </div>

                <!-- Live Clock -->
                <div class="live-clock-section">
                    <div class="clock-card">
                        <div class="clock-label">Current Time</div>
                        <div class="clock-time" id="liveClock">--:--:--</div>
                        <div class="clock-date" id="liveDate">Loading...</div>
                    </div>
                    <div class="clock-card">
                        <div class="clock-label">Server Update</div>
                        <div class="clock-time" id="serverTime" style="font-size: 1.2rem;">--</div>
                        <div class="clock-date" id="lastUpdate">Last refreshed: --</div>
                    </div>
                </div>

                <!-- Dashboard Cards -->
                <div class="dashboard-grid">
                    <div class="dash-card card-villagers" onclick="showPage('villagers')">
                        <div class="dash-card-top">
                            <div class="dash-icon">
                                <svg viewBox="0 0 24 24"><path d="M17 21V19C17 16.79 14.76 15 12 15C9.24 15 7 16.79 7 19V21M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12Z" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <span class="dash-count" id="count-villagers">0</span>
                        </div>
                        <div class="dash-card-bottom">
                            <h3>Total Villagers</h3>
                            <p>Registered residents</p>
                        </div>
                        <div class="dash-card-footer">
                            <span id="active-count">0 Active</span>
                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M5 12H19M12 5L19 12L12 19" stroke="currentColor" stroke-width="2"/></svg>
                        </div>
                    </div>

                    <div class="dash-card card-team" onclick="showPage('team')">
                        <div class="dash-card-top">
                            <div class="dash-icon">
                                <svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4" stroke="currentColor" fill="none" stroke-width="2"/><path d="M6 21V19C6 16.24 8.69 14 12 14C15.31 14 18 16.24 18 19V21" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <span class="dash-count" id="count-team">0</span>
                        </div>
                        <div class="dash-card-bottom">
                            <h3>Team Members</h3>
                            <p>Imam, President & Secretary</p>
                        </div>
                        <div class="dash-card-footer">
                            <span>View Team ‚Üí</span>
                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M5 12H19M12 5L19 12L12 19" stroke="currentColor" stroke-width="2"/></svg>
                        </div>
                    </div>

                    <div class="dash-card card-notices" onclick="showPage('notices')">
                        <div class="dash-card-top">
                            <div class="dash-icon">
                                <svg viewBox="0 0 24 24"><path d="M18 8C18 4.69 15.31 2 12 2C8.69 2 6 4.69 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <span class="dash-count" id="count-notices">0</span>
                        </div>
                        <div class="dash-card-bottom">
                            <h3>Notices & Updates</h3>
                            <p>Latest announcements</p>
                        </div>
                        <div class="dash-card-footer">
                            <span>View All ‚Üí</span>
                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M5 12H19M12 5L19 12L12 19" stroke="currentColor" stroke-width="2"/></svg>
                        </div>
                    </div>

                    <div class="dash-card card-ramzan" onclick="showRamzanCalendar()">
                        <div class="dash-card-top">
                            <div class="dash-icon">
                                <svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <span class="dash-count" id="count-ramzan">30</span>
                        </div>
                        <div class="dash-card-bottom">
                            <h3>Ramzan Schedule</h3>
                            <p>Sehri & Iftar Timings</p>
                        </div>
                        <div class="dash-card-footer">
                            <span>View Schedule ‚Üí</span>
                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M5 12H19M12 5L19 12L12 19" stroke="currentColor" stroke-width="2"/></svg>
                        </div>
                    </div>
                </div>

                <!-- Prayer Times -->
                <div class="prayer-section">
                    <div class="prayer-header">
                        <h2>
                            üïå Prayer Times (Namaz Ka Waqt)
                        </h2>
                        <p id="prayer-update-note">Jama Masjid Simra</p>
                    </div>
                    <div class="prayer-grid" id="prayerGrid">
                        <div class="loading-state">
                            <div class="loader"></div>
                            <span class="loading-text" style="color: white;">Loading prayer times...</span>
                        </div>
                    </div>
                </div>

                <!-- Ramzan Button -->
                <div class="ramzan-btn-wrap" id="ramzanBtnWrap">
                    <button class="ramzan-btn" onclick="showRamzanCalendar()">
                        <svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z" stroke="currentColor" fill="none"/></svg>
                        üåô Ramzan Schedule 1446
                        <svg viewBox="0 0 24 24"><path d="M6 9L12 15L18 9" stroke="currentColor" fill="none" stroke-width="2.5"/></svg>
                    </button>
                </div>

                <!-- Ramzan Calendar (Hidden by default) -->
                <div id="ramzanCalendar" class="ramzan-calendar hidden">
                    <div class="calendar-header">
                        <h3>üåô Ramzan Ul Mubarak 1446</h3>
                        <p>Sehri & Iftar Timings - Village Simra</p>
                        <button class="calendar-close-btn" onclick="hideRamzanCalendar()">‚úï Close Calendar</button>
                    </div>
                    <div class="calendar-grid" id="ramzanGrid">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- ======== VILLAGERS PAGE ======== -->
            <div id="page-villagers" class="content-box hidden">
                <div class="page-header">
                    <h1>
                        <svg viewBox="0 0 24 24"><path d="M17 21V19C17 16.79 14.76 15 12 15C9.24 15 7 16.79 7 19V21M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12Z" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                        Villagers Directory
                    </h1>
                    <p>All registered residents of Village Simra</p>
                </div>

                <div class="search-box">
                    <div class="search-form">
                        <div class="search-input-wrap">
                            <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" fill="none"/><path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2"/></svg>
                            <input type="text" class="search-input" id="searchInput" placeholder="Search by Name, UID, Father's Name..." oninput="debounceSearch()">
                        </div>
                        <button class="search-btn" onclick="searchVillagers()">
                            <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" fill="none"/><path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2"/></svg>
                            Search
                        </button>
                        <span class="search-count" id="searchCount">0 results</span>
                    </div>
                </div>

                <div id="villagersLoading" class="loading-state">
                    <div class="loader"></div>
                    <span class="loading-text">Loading villagers data...</span>
                    <span class="loading-sub">Please wait</span>
                </div>

                <div id="villagersError" class="error-state hidden">
                    <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                    <h3>Error Loading Data</h3>
                    <p id="villagersErrorMsg">Something went wrong</p>
                    <button onclick="refreshAllData()">üîÑ Try Again</button>
                </div>

                <div class="table-wrap hidden" id="villagersTable">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>UID</th>
                                <th>Full Name</th>
                                <th>Father's Name</th>
                                <th>Mobile</th>
                                <th>Address</th>
                                <th>Age</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="villagersBody"></tbody>
                    </table>
                </div>

                <div class="pagination hidden" id="villagersPagination"></div>
            </div>

            <!-- ======== TEAM PAGE ======== -->
            <div id="page-team" class="content-box hidden">
                <div class="page-header">
                    <h1>
                        <svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4" stroke="currentColor" fill="none" stroke-width="2"/><path d="M6 21V19C6 16.24 8.69 14 12 14C15.31 14 18 16.24 18 19V21" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                        Team Members
                    </h1>
                    <p>Imam, President, Secretary & Committee Members</p>
                </div>

                <div id="teamLoading" class="loading-state">
                    <div class="loader"></div>
                    <span class="loading-text">Loading team...</span>
                </div>

                <div id="teamError" class="error-state hidden">
                    <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                    <h3>Error Loading Data</h3>
                    <p id="teamErrorMsg">Something went wrong</p>
                    <button onclick="refreshAllData()">üîÑ Try Again</button>
                </div>

                <div class="team-grid hidden" id="teamGrid"></div>
            </div>

            <!-- ======== NOTICES PAGE ======== -->
            <div id="page-notices" class="content-box hidden">
                <div class="page-header">
                    <h1>
                        <svg viewBox="0 0 24 24"><path d="M18 8C18 4.69 15.31 2 12 2C8.69 2 6 4.69 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                        Notices & Updates
                    </h1>
                    <p>Eidgah, Kabristan, Masjid, Ramzan & More</p>
                </div>

                <div class="filter-wrap" id="noticeFilters">
                    <button class="filter-btn active" onclick="filterNotices('all', this)">üìã All</button>
                    <button class="filter-btn" onclick="filterNotices('Eidgah', this)">üïå Eidgah</button>
                    <button class="filter-btn" onclick="filterNotices('Kabristan', this)">ü™¶ Kabristan</button>
                    <button class="filter-btn" onclick="filterNotices('Masjid', this)">üèõÔ∏è Masjid</button>
                    <button class="filter-btn" onclick="filterNotices('Ramzan', this)">üåô Ramzan</button>
                    <button class="filter-btn" onclick="filterNotices('General', this)">üìå General</button>
                    <button class="filter-btn" onclick="filterNotices('Emergency', this)">üö® Emergency</button>
                </div>

                <div id="noticesLoading" class="loading-state">
                    <div class="loader"></div>
                    <span class="loading-text">Loading notices...</span>
                </div>

                <div id="noticesError" class="error-state hidden">
                    <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                    <h3>Error Loading Data</h3>
                    <p id="noticesErrorMsg">Something went wrong</p>
                    <button onclick="refreshAllData()">üîÑ Try Again</button>
                </div>

                <div class="notice-grid hidden" id="noticeGrid"></div>
            </div>

        </div>
    </main>

    <!-- ============ FOOTER ============ -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-bismillah">Ô∑Ω</div>
                <p class="footer-text">
                    ¬© 2025 <strong>GramVani</strong> - Islamic Village Portal |
                    Design & Developed By <strong>Sadik Husain</strong> | Village Simra
                </p>
                <div class="footer-links">
                    <a href="#" onclick="showPage('home')">Home</a>
                    <a href="#" onclick="showPage('villagers')">Villagers</a>
                    <a href="#" onclick="showPage('team')">Team</a>
                    <a href="#" onclick="showPage('notices')">Notices</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- ============ FAB BUTTONS ============ -->
    <div class="fab-container">
        <button class="fab-btn fab-top" id="fabTop" onclick="scrollToTop()" title="Scroll to Top">
            <svg viewBox="0 0 24 24"><path d="M18 15L12 9L6 15" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round"/></svg>
        </button>
        <button class="fab-btn fab-refresh" id="fabRefresh" onclick="refreshAllData()" title="Refresh Data">
            <svg viewBox="0 0 24 24"><path d="M1 4V10H7M23 20V14H17" stroke="currentColor" fill="none" stroke-linecap="round"/><path d="M20.49 9A9 9 0 005.64 5.64L1 10M23 14L18.36 18.36A9 9 0 013.51 15" stroke="currentColor" fill="none" stroke-linecap="round"/></svg>
        </button>
    </div>

    <!-- ============ JAVASCRIPT ============ -->
    <script>
    // ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    // ‚ïë         GramVani Frontend JavaScript              ‚ïë
    // ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

    // ========== CONFIGURATION ==========
    const CONFIG = {
        API_URL: 'https://script.google.com/macros/s/AKfycbz1KDrLU8kRJ5RjHZh9yjkw8WlhTBcY4J9JWaLOAvOukDVQYdrfvPdoHVM2zV4gcL0inA/exec',
        CACHE_KEY: 'gramvani_cache',
        CACHE_EXPIRY: 5 * 60 * 1000,     // 5 minutes cache
        ITEMS_PER_PAGE: 20,               // Pagination
        SEARCH_DELAY: 400,                // Debounce delay ms
        TOAST_DURATION: 4000              // Toast auto-hide ms
    };

    // ========== GLOBAL STATE ==========
    let appData = {
        villagers: [],
        team: [],
        prayers: [],
        notices: [],
        ramzan: [],
        settings: {},
        stats: {},
        lastUpdated: null
    };

    let currentPage = 'home';
    let villagerPage = 1;
    let searchTimer = null;
    let filteredVillagers = [];
    let currentNoticeFilter = 'all';

    // ========== INITIALIZATION ==========
    document.addEventListener('DOMContentLoaded', () => {
        startClock();
        loadCachedData();
        fetchAllData();
        setupScrollListener();
    });

    // ========== LIVE CLOCK ==========
    function startClock() {
        function updateClock() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', minute: '2-digit', second: '2-digit',
                hour12: true 
            });
            const dateStr = now.toLocaleDateString('en-US', {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
            });
            
            const el = document.getElementById('liveClock');
            const dateEl = document.getElementById('liveDate');
            if (el) el.textContent = timeStr;
            if (dateEl) dateEl.textContent = dateStr;
        }
        updateClock();
        setInterval(updateClock, 1000);
    }

    // ========== DATA FETCHING ==========
    async function fetchAllData() {
        showLoaders(true);
        
        try {
            const url = CONFIG.API_URL + '?action=all&t=' + Date.now();
            const response = await fetch(url);
            
            if (!response.ok) throw new Error('Network error: ' + response.status);
            
            const data = await response.json();
            
            if (data.error) {
                throw new Error(data.message || 'Server error');
            }

            // Store data
            appData.villagers = data.villagers || [];
            appData.team = data.team || [];
            appData.prayers = data.prayers || [];
            appData.notices = data.notices || [];
            appData.ramzan = data.ramzan || [];
            appData.settings = data.settings || {};
            appData.stats = data.stats || {};
            appData.lastUpdated = data.lastUpdated;

            // Cache data
            saveToCache(appData);

            // Render everything
            renderDashboard();
            renderPrayers();
            renderRamzan();
            renderVillagers();
            renderTeam();
            renderNotices();

            // Update UI
            showLoaders(false);
            
            const serverEl = document.getElementById('serverTime');
            const updateEl = document.getElementById('lastUpdate');
            if (serverEl) serverEl.textContent = data.serverTime || '--';
            if (updateEl) updateEl.textContent = 'Updated: ' + new Date().toLocaleTimeString();

            showToast('‚úÖ Data loaded successfully!', 'success');

        } catch (error) {
            console.error('Fetch error:', error);
            showErrors(error.message);
            showToast('‚ùå ' + error.message, 'error');
        }
    }

    // ========== CACHE FUNCTIONS ==========
    function saveToCache(data) {
        try {
            const cache = { data: data, timestamp: Date.now() };
            localStorage.setItem(CONFIG.CACHE_KEY, JSON.stringify(cache));
        } catch(e) { console.warn('Cache save failed:', e); }
    }

    function loadCachedData() {
        try {
            const raw = localStorage.getItem(CONFIG.CACHE_KEY);
            if (!raw) return;
            
            const cache = JSON.parse(raw);
            const age = Date.now() - cache.timestamp;
            
            if (age < CONFIG.CACHE_EXPIRY && cache.data) {
                appData = cache.data;
                renderDashboard();
                renderPrayers();
                renderRamzan();
                renderVillagers();
                renderTeam();
                renderNotices();
                showLoaders(false);
                showToast('üì¶ Loaded from cache', 'info');
            }
        } catch(e) { console.warn('Cache load failed:', e); }
    }

    // ========== RENDER DASHBOARD ==========
    function renderDashboard() {
        const s = appData.stats;
        setText('count-villagers', s.totalVillagers || appData.villagers.length);
        setText('count-team', s.totalTeam || appData.team.length);
        setText('count-notices', s.totalNotices || appData.notices.length);
        setText('count-ramzan', s.totalRamzanDays || appData.ramzan.length);
        setText('active-count', (s.activeVillagers || 0) + ' Active');
        setText('nav-villager-count', appData.villagers.length);
        setText('nav-notice-count', appData.notices.length);

        // Ramzan button visibility
        const ramzanWrap = document.getElementById('ramzanBtnWrap');
        if (ramzanWrap) {
            ramzanWrap.style.display = appData.ramzan.length > 0 ? 'block' : 'none';
        }

        // Settings
        const note = document.getElementById('prayer-update-note');
        if (note && appData.settings.Masjid_Name) {
            note.textContent = appData.settings.Masjid_Name;
        }
    }

    // ========== RENDER PRAYERS ==========
    function renderPrayers() {
        const grid = document.getElementById('prayerGrid');
        const prayers = appData.prayers;

        if (!prayers.length) {
            grid.innerHTML = '<div style="text-align:center;color:rgba(255,255,255,0.6);padding:20px;">No prayer times available</div>';
            return;
        }

        const emojis = {
            'Fajr': 'üåÖ', 'Zuhr': '‚òÄÔ∏è', 'Asr': 'üå§Ô∏è',
            'Maghrib': 'üåá', 'Isha': 'üåô', 'Jummah': 'üïå', 'Tahajjud': '‚≠ê'
        };

        let html = '';
        prayers.forEach(p => {
            const emoji = emojis[p.Namaz_Name] || 'üïå';
            const urdu = p.Namaz_Name_Urdu || '';
            html += `
                <div class="prayer-card">
                    <div class="prayer-emoji">${emoji}</div>
                    <div class="prayer-name">${p.Namaz_Name || '-'}</div>
                    ${urdu ? `<div class="prayer-name-urdu">${urdu}</div>` : ''}
                    <div class="prayer-time-main">${p.Jamaat_Time || '-'}</div>
                    <div class="prayer-azan">Azan: ${p.Azan_Time || '-'}</div>
                </div>
            `;
        });
        grid.innerHTML = html;
    }

    // ========== RENDER RAMZAN ==========
    function renderRamzan() {
        const grid = document.getElementById('ramzanGrid');
        const days = appData.ramzan;

        if (!days.length) {
            grid.innerHTML = '<p style="text-align:center;padding:20px;color:#999;">No Ramzan schedule available</p>';
            return;
        }

        let html = '';
        days.forEach(day => {
            const isSpecial = day.Special_Info && day.Special_Info.trim();
            html += `
                <div class="ramzan-day ${isSpecial ? 'special' : ''}">
                    <div class="day-top">
                        <span class="day-num">Roza ${day.Roza_Number || '-'}</span>
                        <div>
                            <div class="day-name">${day.Day_Name || ''}</div>
                            <div class="day-date">${day.Date_English || '-'}</div>
                        </div>
                    </div>
                    <div class="day-times-grid">
                        <div class="day-time-box sehri">
                            <div class="day-time-label">üåÖ Sehri</div>
                            <div class="day-time-value">${day.Sehri_Time || '-'}</div>
                        </div>
                        <div class="day-time-box iftar">
                            <div class="day-time-label">üåá Iftar</div>
                            <div class="day-time-value">${day.Iftar_Time || '-'}</div>
                        </div>
                    </div>
                    ${isSpecial ? `<div class="day-special">${day.Special_Info}</div>` : ''}
                </div>
            `;
        });
        grid.innerHTML = html;
    }

    // ========== RENDER VILLAGERS ==========
    function renderVillagers(searchTerm = '') {
        const tbody = document.getElementById('villagersBody');
        const table = document.getElementById('villagersTable');
        const pagination = document.getElementById('villagersPagination');
        const countEl = document.getElementById('searchCount');
        
        let data = appData.villagers;

        // Search filter
        if (searchTerm) {
            const term = searchTerm.toLowerCase();
            data = data.filter(v =>
                (v.Full_Name && v.Full_Name.toLowerCase().includes(term)) ||
                (v.UID && v.UID.toLowerCase().includes(term)) ||
                (v.Father_Name && v.Father_Name.toLowerCase().includes(term)) ||
                (v.Address && v.Address.toLowerCase().includes(term))
            );
        }

        filteredVillagers = data;
        const total = data.length;
        const totalPages = Math.ceil(total / CONFIG.ITEMS_PER_PAGE);
        
        if (villagerPage > totalPages) villagerPage = 1;
        
        const start = (villagerPage - 1) * CONFIG.ITEMS_PER_PAGE;
        const pageData = data.slice(start, start + CONFIG.ITEMS_PER_PAGE);

        if (countEl) countEl.textContent = total + ' results';

        if (total === 0) {
            tbody.innerHTML = `<tr><td colspan="8" style="text-align:center;padding:30px;color:#999;">
                <svg viewBox="0 0 24 24" width="40" height="40" style="stroke:#ddd;fill:none;display:block;margin:0 auto 10px;"><circle cx="11" cy="11" r="8" stroke-width="2"/><path d="M21 21L16.65 16.65" stroke-width="2"/></svg>
                No villagers found
            </td></tr>`;
            table.classList.remove('hidden');
            pagination.classList.add('hidden');
            return;
        }

        let html = '';
        pageData.forEach((v, i) => {
            const mobile = v.Mobile_Number || '';
            const masked = mobile.length >= 3 ? 'XXXXX' + mobile.slice(-3) : 'XXXXX';
            const statusClass = v.Status === 'Active' ? 'status-active' : 'status-inactive';
            
            html += `
                <tr>
                    <td>${start + i + 1}</td>
                    <td><strong>${v.UID || '-'}</strong></td>
                    <td>${v.Full_Name || '-'}</td>
                    <td>${v.Father_Name || '-'}</td>
                    <td><span class="mobile-masked">${masked}</span></td>
                    <td>${v.Address || '-'}</td>
                    <td>${v.Age || '-'}</td>
                    <td><span class="status-badge ${statusClass}">${v.Status || 'Active'}</span></td>
                </tr>
            `;
        });
        
        tbody.innerHTML = html;
        table.classList.remove('hidden');

        // Pagination
        if (totalPages > 1) {
            let pagHtml = '';
            pagHtml += `<button class="page-btn" onclick="goToVillagerPage(${villagerPage - 1})" ${villagerPage <= 1 ? 'disabled' : ''}>‚Üê Prev</button>`;
            
            for (let p = 1; p <= totalPages; p++) {
                if (p === 1 || p === totalPages || (p >= villagerPage - 2 && p <= villagerPage + 2)) {
                    pagHtml += `<button class="page-btn ${p === villagerPage ? 'active' : ''}" onclick="goToVillagerPage(${p})">${p}</button>`;
                } else if (p === villagerPage - 3 || p === villagerPage + 3) {
                    pagHtml += `<span class="page-info">...</span>`;
                }
            }
            
            pagHtml += `<span class="page-info">${start + 1}-${Math.min(start + CONFIG.ITEMS_PER_PAGE, total)} of ${total}</span>`;
            pagHtml += `<button class="page-btn" onclick="goToVillagerPage(${villagerPage + 1})" ${villagerPage >= totalPages ? 'disabled' : ''}>Next ‚Üí</button>`;
            
            pagination.innerHTML = pagHtml;
            pagination.classList.remove('hidden');
        } else {
            pagination.classList.add('hidden');
        }
    }

    function goToVillagerPage(page) {
        villagerPage = page;
        const searchTerm = document.getElementById('searchInput').value;
        renderVillagers(searchTerm);
        document.getElementById('villagersTable').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // ========== RENDER TEAM ==========
    function renderTeam() {
        const grid = document.getElementById('teamGrid');
        const team = appData.team;

        if (!team.length) {
            grid.innerHTML = '<div class="empty-state"><svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" fill="none"/><path d="M6 21V19C6 16.24 8.69 14 12 14C15.31 14 18 16.24 18 19V21" stroke="currentColor" stroke-width="2" fill="none"/></svg><p>No team members found</p></div>';
            grid.classList.remove('hidden');
            return;
        }

        let html = '';
        team.forEach(m => {
            const hasPhoto = m.Photo_URL && m.Photo_URL.trim();
            const avatarContent = hasPhoto 
                ? `<img src="${m.Photo_URL}" alt="${m.Name}" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='block'">
                   <svg viewBox="0 0 24 24" style="display:none"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" fill="none"/><path d="M6 21V19C6 16.24 8.69 14 12 14C15.31 14 18 16.24 18 19V21" stroke="currentColor" stroke-width="2" fill="none"/></svg>`
                : `<svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" fill="none"/><path d="M6 21V19C6 16.24 8.69 14 12 14C15.31 14 18 16.24 18 19V21" stroke="currentColor" stroke-width="2" fill="none"/></svg>`;

            html += `
                <div class="team-card">
                    <div class="team-card-top">
                        <div class="team-avatar">${avatarContent}</div>
                        <div class="team-name-header">${m.Name || '-'}</div>
                        <span class="team-role-badge">${m.Role || '-'}</span>
                    </div>
                    <div class="team-card-body">
                        <div class="team-info-row">
                            <div class="team-info-icon">
                                <svg viewBox="0 0 24 24"><path d="M4 7L10 11L4 15V7Z" stroke="currentColor" fill="none" stroke-width="2"/><rect x="12" y="7" width="8" height="8" rx="1" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <div class="team-info-text">
                                <div class="team-info-label">Qualification</div>
                                <div class="team-info-value">${m.Qualification || '-'}</div>
                            </div>
                        </div>
                        <div class="team-info-row">
                            <div class="team-info-icon">
                                <svg viewBox="0 0 24 24"><path d="M22 16.92V19.92C22 20.48 21.56 20.93 21 20.97C14.08 21.5 7.77 18.5 3.64 14.36C-0.5 10.22 -0.5 6.92 3.03 3.03C3.07 2.47 3.52 2.03 4.08 2.03H7.08C7.56 2.03 7.97 2.38 8.05 2.85C8.27 4.15 8.68 5.4 9.26 6.56L7.73 8.09C9.93 12.01 12.99 14.97 16.91 16.27L18.44 14.74C19.6 15.32 20.85 15.73 22.15 15.95C22.62 16.03 22.97 16.44 22.97 16.92" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <div class="team-info-text">
                                <div class="team-info-label">Mobile</div>
                                <div class="team-info-value">${m.Mobile || '-'}</div>
                            </div>
                        </div>
                        <div class="team-info-row">
                            <div class="team-info-icon">
                                <svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" fill="none" stroke-width="2"/><path d="M16 2V6M8 2V6M3 10H21" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <div class="team-info-text">
                                <div class="team-info-label">Joining Date</div>
                                <div class="team-info-value">${m.Joining_Date || '-'}</div>
                            </div>
                        </div>
                        ${m.Experience ? `
                        <div class="team-info-row">
                            <div class="team-info-icon">
                                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" fill="none" stroke-width="2"/><path d="M12 6V12L16 14" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                            </div>
                            <div class="team-info-text">
                                <div class="team-info-label">Experience</div>
                                <div class="team-info-value">${m.Experience}</div>
                            </div>
                        </div>` : ''}
                    </div>
                </div>
            `;
        });
        
        grid.innerHTML = html;
        grid.classList.remove('hidden');
    }

    // ========== RENDER NOTICES ==========
    function renderNotices(filter = 'all') {
        const grid = document.getElementById('noticeGrid');
        let notices = appData.notices;

        // Filter by status (only Active)
        notices = notices.filter(n => !n.Status || n.Status === 'Active');

        if (filter !== 'all') {
            notices = notices.filter(n => n.Category === filter);
        }

        if (!notices.length) {
            grid.innerHTML = `<div class="empty-state" style="grid-column: 1/-1;">
                <svg viewBox="0 0 24 24"><path d="M18 8C18 4.69 15.31 2 12 2C8.69 2 6 4.69 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" fill="none" stroke-width="2"/></svg>
                <p>No notices found${filter !== 'all' ? ' for ' + filter : ''}</p>
            </div>`;
            grid.classList.remove('hidden');
            return;
        }

        const catColors = {
            'Eidgah': '#27ae60', 'Kabristan': '#34495e', 'Masjid': '#e67e22',
            'Ramzan': '#daa520', 'General': '#1b4f72', 'Emergency': '#e74c3c', 'Event': '#9b59b6'
        };

        let html = '';
        notices.forEach(n => {
            const color = catColors[n.Category] || '#0a2f44';
            html += `
                <div class="notice-card" data-cat="${n.Category || ''}">
                    <div class="notice-top">
                        <span class="notice-category" style="background: ${color}">${n.Category || 'Notice'}</span>
                        ${n.Priority ? `<span class="notice-priority priority-${n.Priority}">${n.Priority}</span>` : ''}
                    </div>
                    <div class="notice-title">${n.Title || '-'}</div>
                    <div class="notice-desc">${n.Description || '-'}</div>
                    <div class="notice-footer">
                        <span class="notice-date">üìÖ ${n.Date || '-'}</span>
                        ${n.Posted_By ? `<span class="notice-date">üë§ ${n.Posted_By}</span>` : ''}
                    </div>
                    ${n.Show_Button === 'Yes' ? `
                        <button class="notice-action-btn" onclick="showRamzanCalendar(); showPage('home');" style="margin-top: 12px;">
                            üåô ${n.Button_Text || 'View Schedule'}
                        </button>
                    ` : ''}
                </div>
            `;
        });

        grid.innerHTML = html;
        grid.classList.remove('hidden');
    }

    // ========== SEARCH ==========
    function debounceSearch() {
        clearTimeout(searchTimer);
        searchTimer = setTimeout(() => {
            villagerPage = 1;
            searchVillagers();
        }, CONFIG.SEARCH_DELAY);
    }

    function searchVillagers() {
        const term = document.getElementById('searchInput').value;
        renderVillagers(term);
    }

    // ========== FILTER NOTICES ==========
    function filterNotices(category, btn) {
        currentNoticeFilter = category;
        
        document.querySelectorAll('#noticeFilters .filter-btn').forEach(b => b.classList.remove('active'));
        if (btn) btn.classList.add('active');
        
        renderNotices(category);
    }

    // ========== RAMZAN CALENDAR ==========
    function showRamzanCalendar() {
        const cal = document.getElementById('ramzanCalendar');
        cal.classList.remove('hidden');
        cal.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function hideRamzanCalendar() {
        document.getElementById('ramzanCalendar').classList.add('hidden');
    }

    // ========== PAGE NAVIGATION ==========
    function showPage(page) {
        const pages = ['home', 'villagers', 'team', 'notices'];
        pages.forEach(p => {
            const el = document.getElementById('page-' + p);
            if (el) el.classList.add('hidden');
        });

        const target = document.getElementById('page-' + page);
        if (target) {
            target.classList.remove('hidden');
            target.style.animation = 'none';
            target.offsetHeight; // Trigger reflow
            target.style.animation = 'fadeSlideUp 0.5s ease';
        }

        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        const navEl = document.getElementById('nav-' + page);
        if (navEl) navEl.classList.add('active');

        currentPage = page;
        closeMenu();
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Hide ramzan calendar when leaving home
        if (page !== 'home') hideRamzanCalendar();
    }

    // ========== MOBILE MENU ==========
    function toggleMenu() {
        const nav = document.getElementById('mainNav');
        const burger = document.getElementById('hamburger');
        const overlay = document.getElementById('navOverlay');
        
        nav.classList.toggle('open');
        burger.classList.toggle('active');
        overlay.classList.toggle('visible');
    }

    function closeMenu() {
        const nav = document.getElementById('mainNav');
        const burger = document.getElementById('hamburger');
        const overlay = document.getElementById('navOverlay');
        
        nav.classList.remove('open');
        burger.classList.remove('active');
        overlay.classList.remove('visible');
    }

    // ========== SCROLL HANDLING ==========
    function setupScrollListener() {
        window.addEventListener('scroll', () => {
            const fabTop = document.getElementById('fabTop');
            if (fabTop) {
                if (window.scrollY > 300) {
                    fabTop.classList.add('visible');
                } else {
                    fabTop.classList.remove('visible');
                }
            }
        });
    }

    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ========== REFRESH ==========
    function refreshAllData() {
        const fab = document.getElementById('fabRefresh');
        fab.classList.add('spinning');
        
        localStorage.removeItem(CONFIG.CACHE_KEY);
        
        fetchAllData().finally(() => {
            setTimeout(() => fab.classList.remove('spinning'), 1000);
        });
    }

    // ========== LOADING/ERROR STATES ==========
    function showLoaders(show) {
        const loaders = ['villagersLoading', 'teamLoading', 'noticesLoading'];
        const containers = ['villagersTable', 'villagersPagination', 'teamGrid', 'noticeGrid'];
        
        loaders.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.style.display = show ? 'flex' : 'none';
        });
        
        if (show) {
            containers.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.add('hidden');
            });
        }
    }

    function showErrors(message) {
        const errorIds = [
            { el: 'villagersError', msg: 'villagersErrorMsg' },
            { el: 'teamError', msg: 'teamErrorMsg' },
            { el: 'noticesError', msg: 'noticesErrorMsg' }
        ];
        
        errorIds.forEach(({ el, msg }) => {
            const errEl = document.getElementById(el);
            const msgEl = document.getElementById(msg);
            if (errEl) errEl.classList.remove('hidden');
            if (msgEl) msgEl.textContent = message;
        });
        
        showLoaders(false);
    }

    // ========== TOAST NOTIFICATIONS ==========
    function showToast(message, type = 'success') {
        const container = document.getElementById('toastContainer');
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        const icons = { success: '‚úÖ', error: '‚ùå', info: '‚ÑπÔ∏è' };
        
        toast.innerHTML = `
            <span class="toast-icon">${icons[type] || 'üìå'}</span>
            <span class="toast-msg">${message}</span>
            <button class="toast-close" onclick="this.parentElement.remove()">√ó</button>
        `;
        
        container.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'toastOut 0.3s ease forwards';
            setTimeout(() => toast.remove(), 300);
        }, CONFIG.TOAST_DURATION);
    }

    // ========== UTILITIES ==========
    function setText(id, text) {
        const el = document.getElementById(id);
        if (el) el.textContent = text;
    }

    // Make functions globally accessible
    window.showPage = showPage;
    window.searchVillagers = searchVillagers;
    window.debounceSearch = debounceSearch;
    window.filterNotices = filterNotices;
    window.showRamzanCalendar = showRamzanCalendar;
    window.hideRamzanCalendar = hideRamzanCalendar;
    window.refreshAllData = refreshAllData;
    window.toggleMenu = toggleMenu;
    window.closeMenu = closeMenu;
    window.scrollToTop = scrollToTop;
    window.goToVillagerPage = goToVillagerPage;
    </script>
</body>
</html> 
